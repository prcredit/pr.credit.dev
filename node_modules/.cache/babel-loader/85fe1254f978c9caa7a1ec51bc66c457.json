{"ast":null,"code":"import _objectSpread from\"/home/vetal-home-work/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/apps/sincere/explorer-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/vetal-home-work/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/apps/sincere/explorer-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from'react';import{useLocation,useHistory}from'react-router-dom';import API from\"../../api/api\";import{MultiLangContext}from'../../context/MultiLang/MultiLang';import'./Search.scss';import{classModifier}from\"../../utils\";import{ROUTES}from\"../../config/constants\";var Search=function Search(){var location=useLocation();var history=useHistory();var _useContext=useContext(MultiLangContext),words=_useContext.words;var _useState=useState({value:''}),_useState2=_slicedToArray(_useState,2),searchState=_useState2[0],setSearchState=_useState2[1];var searchButton=function searchButton(inputValue){if(inputValue.length===64){API.getTransaction(inputValue).then(function(res){history.push(ROUTES.setTxRoute(inputValue));}).catch(function(err){console.log(err);history.push('/not-found');});}else if(inputValue.length===40){API.getAddress(inputValue,1).then(function(res){history.push(ROUTES.setAddressRoute(inputValue));}).catch(function(err){console.log(err);history.push('/not-found');});}else{API.getBlock(inputValue).then(function(res){history.push(ROUTES.setBlockRoute(inputValue));}).catch(function(err){console.log(err);history.push('/not-found');});}};var handleChange=function handleChange(e){var value=e.target.value.split(' ').join('');setSearchState(function(prev){return _objectSpread(_objectSpread({},prev),{},{value:value});});};var handleKeyPress=function handleKeyPress(e){if(e.key==='Enter'){searchButton(searchState.value);}};useEffect(function(){console.log(location.pathname);if(location.pathname!=='/not-found'){setSearchState(function(prev){return _objectSpread(_objectSpread({},prev),{},{value:''});});}},[location.pathname]);return/*#__PURE__*/React.createElement(\"div\",{className:classModifier('search',[location.pathname==='/'?'main':'all'])},/*#__PURE__*/React.createElement(\"div\",{className:\"search__container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"search-input__container\"},/*#__PURE__*/React.createElement(\"input\",{className:\"search-input\",type:\"text\",onChange:handleChange,onKeyPress:handleKeyPress,value:searchState.value,placeholder:words.searchPlaceholder}),/*#__PURE__*/React.createElement(\"button\",{className:\"search-input__button\",onClick:function onClick(){return searchButton(searchState.value);}},/*#__PURE__*/React.createElement(\"span\",null,words.find)))));};export default Search;","map":{"version":3,"sources":["/home/vetal-home-work/Документы/apps/sincere/explorer-front/src/containers/Search/Search.tsx"],"names":["React","useContext","useEffect","useState","useLocation","useHistory","API","MultiLangContext","classModifier","ROUTES","Search","location","history","words","value","searchState","setSearchState","searchButton","inputValue","length","getTransaction","then","res","push","setTxRoute","catch","err","console","log","getAddress","setAddressRoute","getBlock","setBlockRoute","handleChange","e","target","split","join","prev","handleKeyPress","key","pathname","searchPlaceholder","find"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { useLocation, useHistory } from 'react-router-dom';\n\nimport API from \"../../api/api\";\nimport { MultiLangContext } from '../../context/MultiLang/MultiLang';\n\nimport './Search.scss';\nimport { classModifier } from \"../../utils\";\nimport { ROUTES } from \"../../config/constants\";\n\n\nconst Search = () => {\n  const location = useLocation();\n  const history = useHistory();\n  const {words} = useContext(MultiLangContext);\n\n  const [searchState, setSearchState] = useState<{\n    value: string;\n  }>({\n    value: '',\n  });\n\n  const searchButton = (inputValue: string) => {\n    if (inputValue.length === 64) {\n      API.getTransaction(inputValue)\n        .then(res => {\n          history.push(ROUTES.setTxRoute(inputValue))\n        })\n        .catch(err => {\n          console.log(err)\n          history.push('/not-found')\n        });\n    } else if (inputValue.length === 40) {\n      API.getAddress(inputValue, 1)\n        .then(res => {\n          history.push(ROUTES.setAddressRoute(inputValue))\n        })\n        .catch(err => {\n          console.log(err)\n          history.push('/not-found')\n        });\n    } else {\n      API.getBlock(inputValue)\n        .then(res => {\n          history.push(ROUTES.setBlockRoute(inputValue))\n        })\n        .catch(err => {\n          console.log(err);\n          history.push('/not-found')\n        });\n    }\n  }\n\n  const handleChange = (e: any) => {\n    const value = e.target.value.split(' ').join('');\n\n    setSearchState(prev => ({\n      ...prev,\n      value: value,\n    }));\n  }\n\n  const handleKeyPress = (e: any) => {\n    if (e.key === 'Enter') {\n      searchButton(searchState.value)\n    }\n  }\n\n  useEffect(() => {\n  console.log(location.pathname)\n    if (location.pathname !== '/not-found') {\n      setSearchState(prev => ({\n        ...prev,\n        value: '',\n      }));\n    }\n  }, [location.pathname]);\n\n\n  return (\n    <div className={classModifier('search',\n      [(location.pathname === '/') ? 'main' : 'all'],\n    )}>\n      <div className=\"search__container\">\n        <div className=\"search-input__container\">\n          <input\n            className='search-input'\n            type=\"text\"\n            onChange={handleChange}\n            onKeyPress={handleKeyPress}\n            value={searchState.value}\n            placeholder={words.searchPlaceholder}\n          />\n\n          <button\n            className='search-input__button'\n            onClick={() => searchButton(searchState.value)}\n          >\n            <span>{words.find}</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Search;"]},"metadata":{},"sourceType":"module"}