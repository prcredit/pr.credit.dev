{"ast":null,"code":"import _objectSpread from\"/home/vetal-home-work/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/apps/sincere/explorer-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/vetal-home-work/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/apps/sincere/explorer-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState,useCallback}from'react';import{NavLink}from'react-router-dom';import Moment from'react-moment';import API from'../../api/api';import{MEDIA_SIZES,ROUTES}from'../../config/constants';import{MultiLangContext}from'../../context/MultiLang/MultiLang';import{classModifier}from\"../../utils\";import{useCheckWindowSize}from\"../../hooks\";import AmountFormat from'../../components/AmountFormat/AmountFormat';import Spinner from'../../components/Spinner';import Pagination from\"../../components/Pagination/Pagination\";import'./MainPage.scss';var MainPage=function MainPage(){var _useContext=useContext(MultiLangContext),selectedLang=_useContext.selectedLang;var _useContext2=useContext(MultiLangContext),words=_useContext2.words;var isDesktop=useCheckWindowSize('IS_GREATER_THAN',MEDIA_SIZES.tablet);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState({data:[],currentPage:1,last_page:1,total_items:50,limit:50}),_useState4=_slicedToArray(_useState3,2),transactionsState=_useState4[0],setTransactionsState=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),openedTrans=_useState6[0],setOpenedTrans=_useState6[1];var onChangePage=useCallback(function(page){setTransactionsState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{currentPage:page});});},[]);useEffect(function(){setLoading(false);API.getTransactions(transactionsState.currentPage).then(function(res){// console.log(res.data)\nsetTransactionsState(function(prevState){return _objectSpread(_objectSpread({},prevState),res.data);});setLoading(true);}).catch(function(err){console.log(err);});},[transactionsState.currentPage]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"section\",{className:\"section-main\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},!loading?/*#__PURE__*/React.createElement(Spinner,null):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"h2\",{className:\"title\"},words.lastTransactions),/*#__PURE__*/React.createElement(\"div\",{className:\"transactions__block\"},/*#__PURE__*/React.createElement(\"div\",{className:\"transactions-header\"},/*#__PURE__*/React.createElement(\"h6\",null,words.block),/*#__PURE__*/React.createElement(\"h6\",null,words.hash),/*#__PURE__*/React.createElement(\"h6\",null,words.date),/*#__PURE__*/React.createElement(\"h6\",null,words.time,\" (UTC+0)\"),/*#__PURE__*/React.createElement(\"h6\",null,words.amount,\" (SNT)\")),transactionsState.data.map(function(trans,index){return/*#__PURE__*/React.createElement(\"div\",{className:classModifier('transaction',[openedTrans===trans.hash&&'active']),key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"transaction-cell transaction-cell--sm\"},/*#__PURE__*/React.createElement(\"h6\",{className:\"transaction-cell__name\"},words.block,\":\"),/*#__PURE__*/React.createElement(NavLink,{className:\"link\",to:ROUTES.setBlockRoute(trans.block)},trans.block)),/*#__PURE__*/React.createElement(\"div\",{className:\"transaction-cell transaction-cell--main\"},/*#__PURE__*/React.createElement(\"h6\",{className:\"transaction-cell__name\"},words.hash,\":\"),/*#__PURE__*/React.createElement(NavLink,{className:\"link link--ellipsis main--link\",to:ROUTES.setTxRoute(trans.hash)},trans.hash),/*#__PURE__*/React.createElement(\"button\",{className:\"show-more\",onClick:function onClick(){return setOpenedTrans(openedTrans===trans.hash?null:trans.hash);}})),isDesktop?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"transaction-cell transaction-cell--sm\"},/*#__PURE__*/React.createElement(\"h6\",{className:\"transaction-cell__name\"},words.date,\":\"),/*#__PURE__*/React.createElement(\"p\",{className:\"text\"},/*#__PURE__*/React.createElement(Moment,{date:trans.timestamp,utc:true,locale:selectedLang,format:\"DD.MM.YYYY\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"transaction-cell transaction-cell--sm\"},/*#__PURE__*/React.createElement(\"h6\",{className:\"transaction-cell__name\"},words.time,\" (UTC+0):\"),/*#__PURE__*/React.createElement(\"p\",{className:\"text\"},/*#__PURE__*/React.createElement(Moment,{date:trans.timestamp,utc:true,locale:\"ru\",format:\"HH:mm:ss\"})))):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"transaction-cell transaction-cell--sm\"},/*#__PURE__*/React.createElement(\"h6\",{className:\"transaction-cell__name\"},words.timestamp,\":\"),/*#__PURE__*/React.createElement(\"p\",{className:\"text\"},/*#__PURE__*/React.createElement(Moment,{date:trans.timestamp,utc:true,locale:selectedLang,fromNow:true}),/*#__PURE__*/React.createElement(Moment,{date:trans.timestamp,utc:true,locale:selectedLang,format:\" (MMMM-DD-YYYY HH:mm:ss +UTC)\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"transaction-cell transaction-cell--sm\"},/*#__PURE__*/React.createElement(\"h6\",{className:\"transaction-cell__name\"},words.value,\":\"),/*#__PURE__*/React.createElement(\"p\",{className:\"amount\"},/*#__PURE__*/React.createElement(AmountFormat,{type:\"snt\",amount:trans.amountTo}),/*#__PURE__*/React.createElement(\"span\",{className:\"amount--sm\"},\" SNT\"),/*#__PURE__*/React.createElement(\"span\",{className:\"amount--sm amount--dollar\"},/*#__PURE__*/React.createElement(AmountFormat,{type:\"usd\",amount:trans.amountTo})))));})),transactionsState.last_page!==1&&/*#__PURE__*/React.createElement(Pagination,{pageCount:transactionsState.last_page,onChange:onChangePage,forcePage:transactionsState.currentPage-1})))));};export default MainPage;","map":{"version":3,"sources":["/home/vetal-home-work/Документы/apps/sincere/explorer-front/src/scenes/MainPage/MainPage.tsx"],"names":["React","useContext","useEffect","useState","useCallback","NavLink","Moment","API","MEDIA_SIZES","ROUTES","MultiLangContext","classModifier","useCheckWindowSize","AmountFormat","Spinner","Pagination","MainPage","selectedLang","words","isDesktop","tablet","loading","setLoading","data","currentPage","last_page","total_items","limit","transactionsState","setTransactionsState","openedTrans","setOpenedTrans","onChangePage","page","prevState","getTransactions","then","res","catch","err","console","log","lastTransactions","block","hash","date","time","amount","map","trans","index","setBlockRoute","setTxRoute","timestamp","value","amountTo"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState, useCallback } from 'react';\nimport { NavLink } from 'react-router-dom';\n\nimport Moment from 'react-moment';\n\nimport API from '../../api/api';\nimport { MEDIA_SIZES, ROUTES } from '../../config/constants';\nimport { MultiLangContext } from '../../context/MultiLang/MultiLang';\nimport { classModifier } from \"../../utils\";\nimport { useCheckWindowSize } from \"../../hooks\";\nimport { ITransaction } from \"../../interfaces/interfaces\";\n\nimport AmountFormat from '../../components/AmountFormat/AmountFormat';\nimport Spinner from '../../components/Spinner';\nimport Pagination from \"../../components/Pagination/Pagination\";\nimport './MainPage.scss';\n\n\nconst MainPage = () => {\n  const {selectedLang} = useContext(MultiLangContext);\n  const {words} = useContext(MultiLangContext);\n  const isDesktop = useCheckWindowSize('IS_GREATER_THAN', MEDIA_SIZES.tablet);\n\n  const [loading, setLoading] = useState(false);\n  const [transactionsState, setTransactionsState] = useState<{\n    data: ITransaction[];\n    currentPage: number;\n    last_page: number;\n    total_items: number;\n    limit: number;\n  }>({\n    data: [],\n    currentPage: 1,\n    last_page: 1,\n    total_items: 50,\n    limit: 50,\n  });\n\n  const [openedTrans, setOpenedTrans] = useState();\n\n  const onChangePage = useCallback((page) => {\n    setTransactionsState(prevState => ({\n      ...prevState,\n      currentPage: page,\n    }));\n  }, []);\n\n  useEffect(() => {\n    setLoading(false);\n\n    API.getTransactions(transactionsState.currentPage)\n      .then(res => {\n        // console.log(res.data)\n\n        setTransactionsState(prevState => {\n          return {\n            ...prevState,\n            ...res.data,\n          }\n        })\n        setLoading(true);\n      })\n      .catch(err => {\n        console.log(err)\n      });\n  }, [transactionsState.currentPage]);\n\n\n  return (\n    <>\n      <section className=\"section-main\">\n        <div className=\"container\">\n          {!loading\n            ? (\n              <Spinner/>\n            )\n            : (\n              <>\n                <h2 className=\"title\">{words.lastTransactions}</h2>\n\n                <div className=\"transactions__block\">\n                  <div className=\"transactions-header\">\n                    <h6>{words.block}</h6>\n\n                    <h6>{words.hash}</h6>\n\n                    <h6>{words.date}</h6>\n\n                    <h6>{words.time} (UTC+0)</h6>\n\n                    <h6>{words.amount} (SNT)</h6>\n                  </div>\n\n                  {\n                    transactionsState.data.map((trans: any, index: number) => {\n                      return (\n                        <div\n                          className={classModifier('transaction', [\n                            openedTrans === trans.hash && 'active'\n                          ])}\n                          key={index}>\n\n                          <div className=\"transaction-cell transaction-cell--sm\">\n                            <h6 className=\"transaction-cell__name\">{words.block}:</h6>\n\n                            <NavLink className='link'\n                                     to={ROUTES.setBlockRoute(trans.block)}>\n                              {trans.block}\n                            </NavLink>\n                          </div>\n\n                          <div className=\"transaction-cell transaction-cell--main\">\n                            <h6 className=\"transaction-cell__name\">{words.hash}:</h6>\n\n                            <NavLink className='link link--ellipsis main--link'\n                                     to={ROUTES.setTxRoute(trans.hash)}>\n                              {trans.hash}\n                            </NavLink>\n\n                            <button\n                              className='show-more'\n                              onClick={() => setOpenedTrans(openedTrans === trans.hash\n                                ? null\n                                : trans.hash\n                              )}\n                            />\n                          </div>\n\n                          {isDesktop\n                            ? <>\n                              <div className=\"transaction-cell transaction-cell--sm\">\n                                <h6 className=\"transaction-cell__name\">{words.date}:</h6>\n\n                                <p className='text'>\n                                  <Moment date={trans.timestamp}\n                                          utc\n                                          locale={selectedLang}\n                                          format=\"DD.MM.YYYY\"\n                                  />\n                                </p>\n                              </div>\n\n                              <div className=\"transaction-cell transaction-cell--sm\">\n                                <h6 className=\"transaction-cell__name\">{words.time} (UTC+0):</h6>\n\n                                <p className='text'>\n                                  <Moment date={trans.timestamp}\n                                          utc\n                                          locale='ru'\n                                          format='HH:mm:ss'\n                                  />\n                                </p>\n                              </div>\n                            </>\n\n                            : <>\n                              <div className=\"transaction-cell transaction-cell--sm\">\n                                <h6 className=\"transaction-cell__name\">{words.timestamp}:</h6>\n\n                                <p className='text'>\n                                  <Moment date={trans.timestamp}\n                                          utc\n                                          locale={selectedLang}\n                                          fromNow\n                                  />\n\n                                  <Moment date={trans.timestamp}\n                                          utc\n                                          locale={selectedLang}\n                                          format=\" (MMMM-DD-YYYY HH:mm:ss +UTC)\"\n                                  />\n                                </p>\n                              </div>\n                            </>\n                          }\n\n                          <div className=\"transaction-cell transaction-cell--sm\">\n                            <h6 className=\"transaction-cell__name\">{words.value}:</h6>\n\n                            <p className='amount'>\n                              <AmountFormat\n                                type='snt'\n                                amount={trans.amountTo}\n                              />\n\n                              <span className='amount--sm'> SNT</span>\n\n                              <span className='amount--sm amount--dollar'>\n                                <AmountFormat\n                                  type='usd'\n                                  amount={trans.amountTo}\n                                />\n                              </span>\n                            </p>\n                          </div>\n                        </div>\n                      )\n                    })\n                  }\n                </div>\n\n\n                {transactionsState.last_page !== 1 &&\n                <Pagination\n                  pageCount={transactionsState.last_page}\n                  onChange={onChangePage}\n                  forcePage={transactionsState.currentPage - 1}\n                />\n                }\n              </>\n            )\n          }\n        </div>\n      </section>\n    </>\n  );\n}\n\nexport default MainPage;"]},"metadata":{},"sourceType":"module"}