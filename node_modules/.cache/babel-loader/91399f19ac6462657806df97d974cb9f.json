{"ast":null,"code":"import _objectSpread from \"/home/vetal-home-work/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/apps/sincere/explorer-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/vetal-home-work/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/apps/sincere/explorer-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/vetal-home-work/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/apps/sincere/explorer-front/src/containers/Search/Search.tsx\";\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useLocation, useHistory, useRouteMatch } from 'react-router-dom';\nimport API from \"../../api/api\";\nimport { MultiLangContext } from '../../context/MultiLang/MultiLang';\nimport './Search.scss';\nimport { classModifier } from \"../../utils\";\nimport { ROUTES } from \"../../config/constants\";\n\nvar Search = function Search() {\n  var location = useLocation();\n  var history = useHistory();\n\n  var _useContext = useContext(MultiLangContext),\n      words = _useContext.words;\n\n  var _useState = useState({\n    value: '',\n    link: ''\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      searchState = _useState2[0],\n      setSearchState = _useState2[1];\n\n  var searchButton = function searchButton(inputValue) {\n    if (inputValue.length === 64) {\n      API.getTransaction(inputValue).then(function (res) {\n        setSearchState(function (prev) {\n          return _objectSpread(_objectSpread({}, prev), {}, {\n            link: ROUTES.setTxRoute(inputValue)\n          });\n        });\n        history.push('tx');\n      }).catch(function (err) {\n        console.log(err);\n        history.push('/not-found');\n      });\n    } else if (inputValue.length === 40) {\n      API.getAddress(inputValue, 1).then(function (res) {\n        setSearchState(function (prev) {\n          return _objectSpread(_objectSpread({}, prev), {}, {\n            link: ROUTES.setAddressRoute(inputValue)\n          });\n        });\n        history.push('address');\n      }).catch(function (err) {\n        console.log(err);\n        history.push('/not-found');\n      });\n    } else {\n      API.getBlock(inputValue).then(function (res) {\n        setSearchState(function (prev) {\n          return _objectSpread(_objectSpread({}, prev), {}, {\n            link: ROUTES.setBlockRoute(inputValue)\n          });\n        });\n        history.push('block');\n      }).catch(function (err) {\n        console.log(err);\n        history.push('/not-found');\n      });\n    }\n\n    setSearchState(function (prev) {\n      return _objectSpread(_objectSpread({}, prev), {}, {\n        link: searchState.value\n      });\n    });\n  };\n\n  var handleChange = function handleChange(e) {\n    var value = e.target.value.split(' ').join('');\n    setSearchState(function (prev) {\n      return _objectSpread(_objectSpread({}, prev), {}, {\n        value: value\n      });\n    });\n  };\n\n  var handleKeyPress = function handleKeyPress(e) {\n    if (e.key === 'Enter') {\n      searchButton(searchState.value);\n    }\n  };\n\n  useEffect(function () {\n    var match = useRouteMatch(\"/:id\"); // searchState.link\n    // if (searchState.value !== '') {\n\n    console.log(match);\n    console.log(searchState.link); // }\n    // console.log(location)\n    // if (location.pathname === '/') {\n    //   setSearchState(prev => ({\n    //     ...prev,\n    //     value: '',\n    //   }));\n    // }\n  }, [location.pathname]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classModifier('search', [location.pathname === '/' ? 'main' : 'all']),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search__container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-input__container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"search-input\",\n    type: \"text\",\n    onChange: handleChange,\n    onKeyPress: handleKeyPress,\n    value: searchState.value,\n    placeholder: words.searchPlaceholder,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"search-input__button\",\n    onClick: function onClick() {\n      return searchButton(searchState.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }, words.find)))));\n};\n\nexport default Search;","map":{"version":3,"sources":["/home/vetal-home-work/Документы/apps/sincere/explorer-front/src/containers/Search/Search.tsx"],"names":["React","useContext","useEffect","useState","useLocation","useHistory","useRouteMatch","API","MultiLangContext","classModifier","ROUTES","Search","location","history","words","value","link","searchState","setSearchState","searchButton","inputValue","length","getTransaction","then","res","prev","setTxRoute","push","catch","err","console","log","getAddress","setAddressRoute","getBlock","setBlockRoute","handleChange","e","target","split","join","handleKeyPress","key","match","pathname","searchPlaceholder","find"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { useLocation, useHistory, useRouteMatch } from 'react-router-dom';\n\nimport API from \"../../api/api\";\nimport { IMatchParams } from \"../../interfaces/interfaces\";\nimport { MultiLangContext } from '../../context/MultiLang/MultiLang';\n\nimport './Search.scss';\nimport { classModifier } from \"../../utils\";\nimport { ROUTES } from \"../../config/constants\";\n\n\nconst Search = () => {\n  const location = useLocation();\n  const history = useHistory();\n  const {words} = useContext(MultiLangContext);\n\n  const [searchState, setSearchState] = useState<{\n    value: string;\n    link: string;\n  }>({\n    value: '',\n    link: '',\n  });\n\n  const searchButton = (inputValue: string) => {\n    if (inputValue.length === 64) {\n      API.getTransaction(inputValue)\n        .then(res => {\n          setSearchState(prev => ({\n            ...prev,\n            link: ROUTES.setTxRoute(inputValue),\n          }));\n          history.push('tx')\n        })\n        .catch(err => {\n          console.log(err)\n          history.push('/not-found')\n        });\n    } else if (inputValue.length === 40) {\n      API.getAddress(inputValue, 1)\n        .then(res => {\n          setSearchState(prev => ({\n            ...prev,\n            link: ROUTES.setAddressRoute(inputValue),\n          }));\n          history.push('address')\n        })\n        .catch(err => {\n          console.log(err)\n          history.push('/not-found')\n        });\n    } else {\n      API.getBlock(inputValue)\n        .then(res => {\n          setSearchState(prev => ({\n            ...prev,\n            link: ROUTES.setBlockRoute(inputValue),\n          }));\n          history.push('block')\n        })\n        .catch(err => {\n          console.log(err);\n          history.push('/not-found')\n        });\n    }\n\n    setSearchState(prev => ({\n      ...prev,\n      link: searchState.value,\n    }));\n  }\n\n  const handleChange = (e: any) => {\n    const value = e.target.value.split(' ').join('');\n\n    setSearchState(prev => ({\n      ...prev,\n      value: value,\n    }));\n  }\n\n  const handleKeyPress = (e: any) => {\n    if (e.key === 'Enter') {\n      searchButton(searchState.value)\n    }\n  }\n\n\n\n\n  useEffect(() => {\n\n    const match = useRouteMatch<IMatchParams>(`/:id`);\n\n    // searchState.link\n  // if (searchState.value !== '') {\n    console.log(match)\n    console.log(searchState.link)\n  // }\n\n    // console.log(location)\n    // if (location.pathname === '/') {\n    //   setSearchState(prev => ({\n    //     ...prev,\n    //     value: '',\n    //   }));\n    // }\n  }, [location.pathname]);\n\n\n  return (\n    <div className={classModifier('search',\n      [(location.pathname === '/') ? 'main' : 'all'],\n    )}>\n      <div className=\"search__container\">\n        <div className=\"search-input__container\">\n          <input\n            className='search-input'\n            type=\"text\"\n            onChange={handleChange}\n            onKeyPress={handleKeyPress}\n            value={searchState.value}\n            placeholder={words.searchPlaceholder}\n          />\n\n          <button\n            className='search-input__button'\n            onClick={() => searchButton(searchState.value)}\n          >\n            <span>{words.find}</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Search;"]},"metadata":{},"sourceType":"module"}